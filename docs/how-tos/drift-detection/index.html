<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon.png><title>Enabling Drift Detection in Fleet | KubeFleet</title>
<meta name=description content="How to enable drift detection in Fleet"><meta property="og:url" content="https://kubefleet.dev/docs/how-tos/drift-detection/"><meta property="og:site_name" content="KubeFleet"><meta property="og:title" content="Enabling Drift Detection in Fleet"><meta property="og:description" content="How to enable drift detection in Fleet"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta itemprop=name content="Enabling Drift Detection in Fleet"><meta itemprop=description content="How to enable drift detection in Fleet"><meta itemprop=wordCount content="2125"><meta name=twitter:card content="summary"><meta name=twitter:title content="Enabling Drift Detection in Fleet"><meta name=twitter:description content="How to enable drift detection in Fleet"><link rel=preload href=/scss/main.min.9dbd381173ff32a411282c4d4c12047d289d581adc6a714308894ed3662001cb.css as=style><link href=/scss/main.min.9dbd381173ff32a411282c4d4c12047d289d581adc6a714308894ed3662001cb.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-page><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg role="img" viewBox="119.76 200.76 1260.48 1098.48"><title>KubeFleet</title><defs><style>.cls-1{fill:#fff}</style></defs><path d="M629.63 844.46l-38.9-153.8 159.83-68.71 157.8 69.9-38.54 151.84-240.19.77z" class="cls-1"/><path d="M885.25 551.34V658.4l-132.84-57.93-137.55 60.04c-3.05 2.43-2.87-7.86-2.87-9.6v-99.56h273.26zm-29.07-79.23c.97.77-1.94 2.76-1.94 3.21v59.95c0 .65 2.45 1.64 1.94 3.21H643c-.52-1.57 1.94-2.56 1.94-3.21v-59.95c0-.65-2.45-1.64-1.94-3.21h213.18zm-155.04-55.67h98.84v44.96h-98.84zm461.95 323.44-26.99 103.81-199.43.71-27.45-103.41 127.01-56.75 126.86 55.64z" class="cls-1"/><path d="M1143.78 632.7v79.22l-107.54-45.11-111.45 47.23c-.95-.79 1.94-2.73 1.94-3.19v-74.94c0-.65-2.45-1.64-1.94-3.21h218.99zm-25.19-66.37v53.53H951.92V567.4l2.91-2.75c.79-.06 1.46 1.68 1.94 1.68h161.82zm-36.82-47.11v36.4h-93.02c3.3-10.04 2.69-22.86.47-33.28l2.44-3.12h90.12zm-488 220.56L563.8 844.83l-198.53-.37-27.36-103.47 126.64-56.36 129.22 55.15z" class="cls-1"/><path d="M574.38 632.7c.97.77-1.94 2.76-1.94 3.21v76.01l-107.52-45.13-107.6 47.27V632.7h217.05zm-25.19-68.52v55.67H382.52c-.52-1.57 1.94-2.56 1.94-3.21v-47.11c0-.54-2.29-1.71-1.12-3.24l5.88-2.22 159.97.1zm-127.91-44.96h91.09v36.4h-91.09z" class="cls-1"/><path d="M1053.6 225.51H447.4L144.3 750.5l303.1 524.99h606.2l303.1-524.99-303.1-524.99zm-31.06 996.17H478.47L206.44 750.5l272.03-471.18h544.07l272.03 471.18-272.03 471.18z" class="cls-1"/><path d="M265.07 901.28h973.01v53.81H265.07zm76.07 117.64h815v53.81h-815zm63.73 112.59h682.56v53.81H404.87z" class="cls-1"/></svg></span><span class=navbar-brand__name>KubeFleet</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class="nav-link active" href=/docs/><span>Docs</span></a></li><li class="nav-item dropdown d-none d-lg-block"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><ul class=dropdown-menu><li><a class=dropdown-item href=/zh-cn/>ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰</a></li></ul></div></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this siteâ€¦" aria-label="Search this siteâ€¦" autocomplete=off data-offline-search-index-json-src=/offline-search-index.0da800b108c9dafb2c9df58e456b44f6.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this siteâ€¦" aria-label="Search this siteâ€¦" autocomplete=off data-offline-search-index-json-src=/offline-search-index.0da800b108c9dafb2c9df58e456b44f6.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><div class="td-sidebar-nav__section nav-item dropdown d-block d-lg-none"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><ul class=dropdown-menu><li><a class=dropdown-item href=/zh-cn/>ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰</a></li></ul></div></div><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ title="Welcome to KubeFleet Documentation" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Docs</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsconcepts-li><a href=/docs/concepts/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsconcepts><span>Concepts</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptscomponents-li><a href=/docs/concepts/components/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptscomponents><span>Fleet components</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsmembercluster-li><a href=/docs/concepts/membercluster/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsmembercluster><span>MemberCluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptscrp-li><a href=/docs/concepts/crp/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptscrp><span>ClusterResourcePlacement</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsrp-li><a href=/docs/concepts/rp/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsrp><span>ResourcePlacement</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsscheduler-li><a href=/docs/concepts/scheduler/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsscheduler><span>Scheduler</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsscheduling-framework-li><a href=/docs/concepts/scheduling-framework/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsscheduling-framework><span>Scheduling Framework</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsproperties-li><a href=/docs/concepts/properties/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsproperties><span>Properties and Property Provides</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptssafe-rollout-li><a href=/docs/concepts/safe-rollout/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptssafe-rollout><span>Safe Rollout</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsoverride-li><a href=/docs/concepts/override/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsoverride><span>Override</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsstaged-update-li><a href=/docs/concepts/staged-update/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsstaged-update><span>Staged Update</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptseviction-pdb-li><a href=/docs/concepts/eviction-pdb/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptseviction-pdb><span>Eviction and Placement Disruption Budget</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsgetting-started-li><a href=/docs/getting-started/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsgetting-started><span>Getting Started</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgetting-startedkind-li><a href=/docs/getting-started/kind/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedkind><span>Getting started with Fleet using KinD clusters</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgetting-startedon-prem-li><a href=/docs/getting-started/on-prem/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedon-prem><span>Getting started with Fleet using on-premises clusters</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docshow-tos-li><a href=/docs/how-tos/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docshow-tos><span>How-To Guides</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosclusters-li><a href=/docs/how-tos/clusters/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosclusters><span>Managing clusters</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-toscrp-li><a href=/docs/how-tos/crp/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-toscrp><span>Using the ClusterResourcePlacement API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosrp-li><a href=/docs/how-tos/rp/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosrp><span>Using the ResourcePlacement API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosaffinities-li><a href=/docs/how-tos/affinities/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosaffinities><span>Using Affinity to Pick Clusters</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tostopology-spread-constraints-li><a href=/docs/how-tos/topology-spread-constraints/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tostopology-spread-constraints><span>Using Topology Spread Constraints to Spread Resources</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosproperty-based-scheduling-li><a href=/docs/how-tos/property-based-scheduling/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosproperty-based-scheduling><span>Using Property-Based Scheduling</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tostaints-tolerations-li><a href=/docs/how-tos/taints-tolerations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tostaints-tolerations><span>Using Taints and Tolerations</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-toscluster-resource-override-li><a href=/docs/how-tos/cluster-resource-override/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-toscluster-resource-override><span>Using the ClusterResourceOverride API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosresource-override-li><a href=/docs/how-tos/resource-override/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosresource-override><span>Using the ResourceOverride API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosenvelope-object-li><a href=/docs/how-tos/envelope-object/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosenvelope-object><span>Using Envelope Objects to Place Resources</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tostakeover-li><a href=/docs/how-tos/takeover/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tostakeover><span>Controlling How Fleet Handles Pre-Existing Resources</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docshow-tosdrift-detection-li><a href=/docs/how-tos/drift-detection/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-docshow-tosdrift-detection><span class=td-sidebar-nav-active-item>Enabling Drift Detection in Fleet</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosreportdiff-li><a href=/docs/how-tos/reportdiff/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosreportdiff><span>Using the ReportDiff Apply Mode</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosstaged-update-li><a href=/docs/how-tos/staged-update/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosstaged-update><span>How to Roll Out and Roll Back Changes in Stage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-toseviction-disruption-budget-li><a href=/docs/how-tos/eviction-disruption-budget/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-toseviction-disruption-budget><span>Evicting Resources and Setting up Disruption Budgets</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosai-job-scheduling-kueue-integration-li><a href=/docs/how-tos/ai-job-scheduling-kueue-integration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosai-job-scheduling-kueue-integration><span>Scheduling AI Jobs with Kueue and Fleet</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docstutorials-li><a href=/docs/tutorials/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docstutorials><span>Tutorials</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsclustermigrationdr-li><a href=/docs/tutorials/clustermigrationdr/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsclustermigrationdr><span>Resource Migration Across Clusters</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsmigrationwithoverridedr-li><a href=/docs/tutorials/migrationwithoverridedr/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsmigrationwithoverridedr><span>Resource Migration With Overrides</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsargocd-li><a href=/docs/tutorials/argocd/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsargocd><span>KubeFleet and ArgoCD Integration</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docstroubleshooting-li><a href=/docs/troubleshooting/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docstroubleshooting><span>Troubleshooting Guides</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacement-li><a href=/docs/troubleshooting/clusterresourceplacement/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacement><span>ClusterResourcePlacement TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacementscheduled-li><a href=/docs/troubleshooting/clusterresourceplacementscheduled/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacementscheduled><span>CRP Schedule Failure TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacementrolloutstarted-li><a href=/docs/troubleshooting/clusterresourceplacementrolloutstarted/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacementrolloutstarted><span>CRP Rollout Failure TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacementoverridden-li><a href=/docs/troubleshooting/clusterresourceplacementoverridden/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacementoverridden><span>CRP Override Failure TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacementworksynchronized-li><a href=/docs/troubleshooting/clusterresourceplacementworksynchronized/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacementworksynchronized><span>CRP Work-Synchronization Failure TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacementapplied-li><a href=/docs/troubleshooting/clusterresourceplacementapplied/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacementapplied><span>CRP Work-Application Failure TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacementavailable-li><a href=/docs/troubleshooting/clusterresourceplacementavailable/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacementavailable><span>CRP Availability Failure TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingdriftanddiffdetection-li><a href=/docs/troubleshooting/driftanddiffdetection/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingdriftanddiffdetection><span>CRP Drift Detection and Configuration Difference Check Unexpected Result TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacementdiffreported-li><a href=/docs/troubleshooting/clusterresourceplacementdiffreported/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacementdiffreported><span>CRP Diff Reporting Failure TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterstagedupdaterun-li><a href=/docs/troubleshooting/clusterstagedupdaterun/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterstagedupdaterun><span>ClusterStagedUpdateRun TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacementeviction-li><a href=/docs/troubleshooting/clusterresourceplacementeviction/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacementeviction><span>ClusterResourcePlacementEviction TSG</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsfaq-li><a href=/docs/faq/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsfaq><span>Frequently Asked Questions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsapi-reference-li><a href=/docs/api-reference/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsapi-reference><span>API Reference</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsapi-referenceclusterkubernetes-fleetiov1-li><a href=/docs/api-reference/cluster.kubernetes-fleet.io/v1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-referenceclusterkubernetes-fleetiov1><span>API Reference</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsapi-referenceclusterkubernetes-fleetiov1beta1-li><a href=/docs/api-reference/cluster.kubernetes-fleet.io/v1beta1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-referenceclusterkubernetes-fleetiov1beta1><span>API Reference</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsapi-referenceplacementkubernetes-fleetiov1-li><a href=/docs/api-reference/placement.kubernetes-fleet.io/v1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-referenceplacementkubernetes-fleetiov1><span>API Reference</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsapi-referenceplacementkubernetes-fleetiov1beta1-li><a href=/docs/api-reference/placement.kubernetes-fleet.io/v1beta1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-referenceplacementkubernetes-fleetiov1beta1><span>API Reference</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"><a href=https://github.com/kubefleet-dev/website/tree/main/content/en/docs/how-tos/drift-detection.md class="td-page-meta--view td-page-meta__view" target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a href=https://github.com/kubefleet-dev/website/edit/main/content/en/docs/how-tos/drift-detection.md class="td-page-meta--edit td-page-meta__edit" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
<a href="https://github.com/kubefleet-dev/website/new/main/content/en/docs/how-tos?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class="td-page-meta--child td-page-meta__child" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
<a href="https://github.com/kubefleet-dev/website/issues/new?title=Enabling%20Drift%20Detection%20in%20Fleet" class="td-page-meta--issue td-page-meta__issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/kubefleet-dev/kubefleet/issues/new class="td-page-meta--project td-page-meta__project-issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
<a id=print href=/docs/how-tos/_print/><i class="fa-solid fa-print fa-fw"></i> Print entire section</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#what-is-a-drift>What is a drift?</a></li><li><a href=#how-fleet-can-be-used-to-handle-drifts-gracefully>How Fleet can be used to handle drifts gracefully</a></li><li><a href=#comparison-options>Comparison options</a></li><li><a href=#summary>Summary</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Docs</a></li><li class=breadcrumb-item><a href=/docs/how-tos/>How-To Guides</a></li><li class="breadcrumb-item active" aria-current=page>Enabling Drift Detection in Fleet</li></ol></nav><div class=td-content><h1>Enabling Drift Detection in Fleet</h1><div class=lead>How to enable drift detection in Fleet</div><header class=article-meta></header><p>This guide provides an overview on how to enable drift detection in Fleet. This feature can help
developers and admins identify (and act upon) configuration drifts in their KubeFleet system,
which are often brought by temporary fixes, inadvertent changes, and failed automations.</p><blockquote><p>Before you begin</p><p>The new drift detection experience is currently in preview.</p><p>Note that the APIs for the new experience are only available in the Fleet v1beta1 API, not the v1 API. If you do not see the new APIs in command outputs, verify that you are explicitly requesting the v1beta1 API objects, as opposed to the v1 API objects (the default).</p></blockquote><h2 id=what-is-a-drift>What is a drift?</h2><p>A drift occurs when a non-Fleet agent (e.g., a developer or a controller) makes changes to
a field of a Fleet-managed resource directly on the member cluster side without modifying
the corresponding resource template created on the hub cluster.</p><p>See the steps below for an example; the code assumes that you have a Fleet of two clusters,
<code>member-1</code> and <code>member-2</code>.</p><ul><li><p>Switch to the hub cluster in the preview environment:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl config use-context hub-admin
</span></span></code></pre></div></li><li><p>Create a namespace, <code>work</code>, on the hub cluster, with some labels:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl create ns work
</span></span><span style=display:flex><span>kubectl label ns work <span style=color:#000>app</span><span style=color:#ce5c00;font-weight:700>=</span>work
</span></span><span style=display:flex><span>kubectl label ns work <span style=color:#000>owner</span><span style=color:#ce5c00;font-weight:700>=</span>redfield
</span></span></code></pre></div></li><li><p>Create a CRP object, which places the namespace on all member clusters:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cat <span style=color:#4e9a06>&lt;&lt;EOF | kubectl apply -f -
</span></span></span><span style=display:flex><span><span style=color:#4e9a06># The YAML configuration of the CRP object.
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>apiVersion: placement.kubernetes-fleet.io/v1beta1
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>kind: ClusterResourcePlacement
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>metadata:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  name: work
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>spec:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  resourceSelectors:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    - group: &#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      kind: Namespace
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      version: v1
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      # Select all namespaces with the label app=work.      
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      labelSelector:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        matchLabels:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>          app: work
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  policy:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    placementType: PickAll
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  strategy:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    # For simplicity reasons, the CRP is configured to roll out changes to
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    # all member clusters at once. This is not a setup recommended for production
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    # use.         
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    type: RollingUpdate
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    rollingUpdate:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      maxUnavailable: 100%
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      unavailablePeriodSeconds: 1            
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>EOF</span>
</span></span></code></pre></div></li><li><p>Fleet should be able to finish the placement within seconds. To verify the progress, run the command below:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl get clusterresourceplacement.v1beta1.placement.kubernetes-fleet.io work
</span></span></code></pre></div><p>Confirm that in the output, Fleet has reported that the placement is of the <code>Available</code> state.</p></li><li><p>Switch to the first member cluster, <code>member-1</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl config use-context member-1-admin
</span></span></code></pre></div></li><li><p>You should see the namespace, <code>work</code>, being placed in this member cluster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl get ns work --show-labels
</span></span></code></pre></div><p>The output should look as follows; note that all the labels have been set
(the <code>kubernetes.io/metadata.name</code> label is added by the Kubernetes system automatically):</p><pre tabindex=0><code>NAME     STATUS   AGE   LABELS
work     Active   91m   app=work,owner=redfield,kubernetes.io/metadata.name=work
</code></pre></li><li><p>Anyone with proper access to the member cluster could modify the namespace as they want;
for example, one can set the <code>owner</code> label to a different value:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl label ns work <span style=color:#000>owner</span><span style=color:#ce5c00;font-weight:700>=</span>wesker --overwrite
</span></span><span style=display:flex><span>kubectl label ns work <span style=color:#000>use</span><span style=color:#ce5c00;font-weight:700>=</span>hack --overwrite
</span></span></code></pre></div><p><strong>Now the namespace has drifted from its intended state.</strong></p></li></ul><p>Note that drifts are not necessarily a bad thing: to ensure system availability, often developers
and admins would need to make ad-hoc changes to the system; for example, one might need to set a
Deployment on a member cluster to use a different image from its template (as kept on the hub
cluster) to test a fix. In the current version of Fleet, the system is not drift-aware, which
means that Fleet will simply re-apply the resource template periodically with or without drifts.</p><p>In the case above:</p><ul><li><p>Since the owner label has been set on the resource template, its value would be overwritten by
Fleet, from <code>wesker</code> to <code>redfield</code>, within minutes. This provides a great consistency guarantee
but also blocks out all possibilities of expedient fixes/changes, which can be an inconvenience at times.</p></li><li><p>The <code>use</code> label is not a part of the resource template, so it will not be affected by any
apply op performed by Fleet. Its prolonged presence might pose an issue, depending on the
nature of the setup.</p></li></ul><h2 id=how-fleet-can-be-used-to-handle-drifts-gracefully>How Fleet can be used to handle drifts gracefully</h2><p>Fleet aims to provide an experience that:</p><ul><li>âœ… allows developers and admins to make changes on the member cluster side when necessary; and</li><li>âœ… helps developers and admins to detect drifts, esp. long-living ones, in their systems,
so that they can be handled properly; and</li><li>âœ… grants developers and admins great flexibility on when and how drifts should be handled.</li></ul><p>To enable the new experience, set proper apply strategies in the CRP object, as
illustrated by the steps below:</p><ul><li><p>Switch to the hub cluster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl config use-context hub-admin
</span></span></code></pre></div></li><li><p>Update the existing CRP (<code>work</code>), to use an apply strategy with the <code>whenToApply</code> field set to
<code>IfNotDrifted</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cat <span style=color:#4e9a06>&lt;&lt;EOF | kubectl apply -f -
</span></span></span><span style=display:flex><span><span style=color:#4e9a06># The YAML configuration of the CRP object.
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>apiVersion: placement.kubernetes-fleet.io/v1beta1
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>kind: ClusterResourcePlacement
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>metadata:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  name: work
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>spec:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  resourceSelectors:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    - group: &#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      kind: Namespace
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      version: v1
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      # Select all namespaces with the label app=work. 
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      labelSelector:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        matchLabels:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>          app: work
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  policy:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    placementType: PickAll
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  strategy:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    applyStrategy:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      whenToApply: IfNotDrifted
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    # For simplicity reasons, the CRP is configured to roll out changes to
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    # all member clusters at once. This is not a setup recommended for production
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    # use.      
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    type: RollingUpdate
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    rollingUpdate:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      maxUnavailable: 100%
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>      unavailablePeriodSeconds: 1                
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>EOF</span>
</span></span></code></pre></div><p>The <code>whenToApply</code> field features two options:</p><ul><li><code>Always</code>: this is the default option ðŸ˜‘. With this setting, Fleet will periodically apply
the resource templates from the hub cluster to member clusters, with or without drifts.
This is consistent with the behavior before the new drift detection and takeover experience.</li><li><code>IfNotDrifted</code>: this is the new option âœ¨ provided by the drift detection mechanism. With
this setting, Fleet will check for drifts periodically; if drifts are found, Fleet will stop
applying the resource templates and report in the CRP status.</li></ul></li><li><p>Switch to the first member cluster and edit the labels for a second time, effectively re-introducing
a drift in the system. After it&rsquo;s done, switch back to the hub cluster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl config use-context member-1-admin
</span></span><span style=display:flex><span>kubectl label ns work <span style=color:#000>owner</span><span style=color:#ce5c00;font-weight:700>=</span>wesker --overwrite
</span></span><span style=display:flex><span>kubectl label ns work <span style=color:#000>use</span><span style=color:#ce5c00;font-weight:700>=</span>hack --overwrite
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#</span>
</span></span><span style=display:flex><span>kubectl config use-context hub-admin
</span></span></code></pre></div></li><li><p>Fleet should be able to find the drifts swiftly (w/in a few seconds). Inspect the placement status Fleet
reports for each cluster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl get clusterresourceplacement.v1beta1.placement.kubernetes-fleet.io work -o <span style=color:#000>jsonpath</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;{.status.placementStatuses}&#39;</span> <span style=color:#000;font-weight:700>|</span> jq
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># The command above uses JSON paths to query the relevant status information</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># directly and uses the jq utility to pretty print the output JSON.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># jq might not be available in your environment. You may have to install it</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># separately, or omit it from the command.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># If the output is empty, the status might have not been populated properly</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># yet. Retry in a few seconds; you may also want to switch the output type</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># from jsonpath to yaml to see the full object.</span>
</span></span></code></pre></div><p>The output should look like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>{<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>&#34;clusterName&#34;: </span><span style=color:#4e9a06>&#34;member-1&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>&#34;conditions&#34;: </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#000>...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>{<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#000>...</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;status&#34;: </span><span style=color:#4e9a06>&#34;False&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;type&#34;: </span><span style=color:#4e9a06>&#34;Applied&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>}<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>],</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>&#34;driftedPlacements&#34;: </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>{<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;firstDriftedObservedTime&#34;: </span><span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;kind&#34;: </span><span style=color:#4e9a06>&#34;Namespace&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;name&#34;: </span><span style=color:#4e9a06>&#34;work&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;observationTime&#34;: </span><span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;observedDrifts&#34;: </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span>{<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                    </span><span style=color:#204a87;font-weight:700>&#34;path&#34;: </span><span style=color:#4e9a06>&#34;/metadata/labels/owner&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                    </span><span style=color:#204a87;font-weight:700>&#34;valueInHub&#34;: </span><span style=color:#4e9a06>&#34;redfield&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                    </span><span style=color:#204a87;font-weight:700>&#34;valueInMember&#34;: </span><span style=color:#4e9a06>&#34;wesker&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span>}<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#000;font-weight:700>],</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;targetClusterObservedGeneration&#34;: </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;version&#34;: </span><span style=color:#4e9a06>&#34;v1&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>}<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>],</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>&#34;failedPlacements&#34;: </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>{<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;condition&#34;: </span>{<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>&#34;lastTransitionTime&#34;: </span><span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>&#34;message&#34;: </span><span style=color:#4e9a06>&#34;Failed to apply the manifest (error: cannot apply manifest: drifts are found between the manifest and the object from the member cluster)&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>&#34;reason&#34;: </span><span style=color:#4e9a06>&#34;FoundDrifts&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>&#34;status&#34;: </span><span style=color:#4e9a06>&#34;False&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span><span style=color:#204a87;font-weight:700>&#34;type&#34;: </span><span style=color:#4e9a06>&#34;Applied&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span>}<span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;kind&#34;: </span><span style=color:#4e9a06>&#34;Namespace&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;name&#34;: </span><span style=color:#4e9a06>&#34;work&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;version&#34;: </span><span style=color:#4e9a06>&#34;v1&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>}<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>}<span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>{<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>&#34;clusterName&#34;: </span><span style=color:#4e9a06>&#34;member-2&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>&#34;conditions&#34;: </span><span style=color:#000;font-weight:700>[</span><span style=color:#000>...]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>}<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>You should see that cluster <code>member-1</code> has encountered an apply failure. The
<code>failedPlacements</code> part explains exactly which manifests have failed on <code>member-1</code>
and its reason; in this case, the apply op fails as Fleet finds out that the namespace
<code>work</code> has drifted from its intended state. The <code>driftedPlacements</code> part specifies in
detail which fields have drifted and the value differences between the hub
cluster and the member cluster.</p><p>Fleet will report the following information about a drift:</p><ul><li><code>group</code>, <code>kind</code>, <code>version</code>, <code>namespace</code>, and <code>name</code>: the resource that has drifted from its desired state.</li><li><code>observationTime</code>: the timestamp where the current drift detail is collected.</li><li><code>firstDriftedObservedTime</code>: the timestamp where the current drift is first observed.</li><li><code>observedDrifts</code>: the drift details, specifically:<ul><li><code>path</code>: A JSON path (RFC 6901) that points to the drifted field;</li><li><code>valueInHub</code>: the value at the JSON path as seen from the hub cluster resource template
(the desired state). If this value is absent, the field does not exist in the resource template.</li><li><code>valueInMember</code>: the value at the JSON path as seen from the member cluster resource
(the current state). If this value is absent, the field does not exist in the current state.</li></ul></li><li><code>targetClusterObservedGeneration</code>: the generation of the member cluster resource.</li></ul><p>The following <code>jq</code> query can help you better extract the drifted clusters and the drift
details from the CRP status output:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl get clusterresourceplacement.v1beta1.placement.kubernetes-fleet.io work -o <span style=color:#000>jsonpath</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;{.status.placementStatuses}&#39;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    <span style=color:#000;font-weight:700>|</span> jq <span style=color:#4e9a06>&#39;[.[] | select (.driftedPlacements != null)] | map({clusterName, driftedPlacements})&#39;</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># The command above uses JSON paths to query the relevant status information</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># directly and uses the jq utility to pretty print the output JSON.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># jq might not be available in your environment. You may have to install it</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># separately, or omit it from the command.</span>
</span></span></code></pre></div><p>This query would filter out all the clusters that do not have drifts and report only
the drifted clusters with the drift details:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>{<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>&#34;clusterName&#34;: </span><span style=color:#4e9a06>&#34;member-1&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>&#34;driftedPlacements&#34;: </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>{<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;firstDriftedObservedTime&#34;: </span><span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;kind&#34;: </span><span style=color:#4e9a06>&#34;Namespace&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;name&#34;: </span><span style=color:#4e9a06>&#34;work&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;observationTime&#34;: </span><span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;observedDrifts&#34;: </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span>{<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                    </span><span style=color:#204a87;font-weight:700>&#34;path&#34;: </span><span style=color:#4e9a06>&#34;/metadata/labels/owner&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                    </span><span style=color:#204a87;font-weight:700>&#34;valueInHub&#34;: </span><span style=color:#4e9a06>&#34;redfield&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                    </span><span style=color:#204a87;font-weight:700>&#34;valueInMember&#34;: </span><span style=color:#4e9a06>&#34;wesker&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>                </span>}<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#000;font-weight:700>],</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;targetClusterObservedGeneration&#34;: </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>&#34;version&#34;: </span><span style=color:#4e9a06>&#34;v1&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>}<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span>}<span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div></li><li><p>To fix the drift, consider one of the following options:</p><ul><li>Switch the <code>whenToApply</code> setting back to <code>Always</code>, which will instruct Fleet to overwrite
the drifts using values from the hub cluster resource template; or</li><li>Edit the drifted field directly on the member cluster side, so that the value is
consistent with that on the hub cluster; Fleet will periodically re-evaluate drifts
and should report that no drifts are found soon after.</li><li>Delete the resource from the member cluster. Fleet will then re-apply the resource
template and re-create the resource.</li></ul><blockquote><p>Important:</p><p>The presence of drifts will <strong>NOT</strong> stop Fleet from rolling out newer resource versions. If you choose to edit the resource template on the hub cluster, Fleet will always apply the new resource template in the rollout process, which may also resolve the drift.</p></blockquote></li></ul><h2 id=comparison-options>Comparison options</h2><p>One may have found out that the namespace on the member cluster has another drift, the
label <code>use=hack</code>, which is not reported in the CRP status by Fleet. This is because by default
Fleet compares only managed fields, i.e., fields that are explicitly specified in the resource
template. If a field is not populated on the hub cluster side, Fleet will not recognize its
presence on the member cluster side as a drift. This allows controllers on the member cluster
side to manage some fields automatically without Fleet&rsquo;s involvement; for example, one might would
like to use an HPA solution to auto-scale Deployments as appropriate and consequently decide not
to include the <code>.spec.replicas</code> field in the resource template.</p><p>Fleet recognizes that there might be cases where developers and admins would like to have their
resources look exactly the same across their fleet. If this scenario applies, one might set up
the <code>comparisonOptions</code> field in the apply strategy from the <code>partialComparison</code> value
(the default) to <code>fullComparison</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>apiVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>placement.kubernetes-fleet.io/v1beta1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ClusterResourcePlacement</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>metadata</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>work</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>spec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>resourceSelectors</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>group</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>kind</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Namespace</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>version</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>v1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>labelSelector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>matchLabels</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>app</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>work</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>policy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>placementType</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>PickAll</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>strategy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>applyStrategy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>whenToApply</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>IfNotDrifted</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>comparisonOption</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>fullComparison</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>With this setting, Fleet will recognize the presence of any unmanaged fields (i.e., fields that
are present on the member cluster side, but not set on the hub cluster side) as drifts as well.
If anyone adds a field to a Fleet-managed object directly on the member cluster, it would trigger
an apply error, which you can find out about the details the same way as illustrated in the
section above.</p><h2 id=summary>Summary</h2><p>Below is a summary of the synergy between the <code>whenToApply</code> and <code>comparisonOption</code> settings:</p><table><thead><tr><th><code>whenToApply</code> setting</th><th><code>comparisonOption</code> setting</th><th>Drift scenario</th><th>Outcome</th></tr></thead><tbody><tr><td><code>IfNotDrifted</code></td><td><code>partialComparison</code></td><td>A managed field (i.e., a field that has been explicitly set in the hub cluster resource template) is edited.</td><td>Fleet will report an apply error in the status, plus the drift details.</td></tr><tr><td><code>IfNotDrifted</code></td><td><code>partialComparison</code></td><td>An unmanaged field (i.e., a field that has not been explicitly set in the hub cluster resource template) is edited/added.</td><td>N/A; the change is left untouched, and Fleet will ignore it.</td></tr><tr><td><code>IfNotDrifted</code></td><td><code>fullComparison</code></td><td>Any field is edited/added.</td><td>Fleet will report an apply error in the status, plus the drift details.</td></tr><tr><td><code>Always</code></td><td><code>partialComparison</code></td><td>A managed field (i.e., a field that has been explicitly set in the hub cluster resource template) is edited.</td><td>N/A; the change is overwritten shortly.</td></tr><tr><td><code>Always</code></td><td><code>partialComparison</code></td><td>An unmanaged field (i.e., a field that has not been explicitly set in the hub cluster resource template) is edited/added.</td><td>N/A; the change is left untouched, and Fleet will ignore it.</td></tr><tr><td><code>Always</code></td><td><code>fullComparison</code></td><td>Any field is edited/added.</td><td>The change on managed fields will be overwritten shortly; Fleet will report drift details about changes on unmanaged fields, but this is not considered as an apply error.</td></tr></tbody></table><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/kubefleet-dev/website/issues/new>tell us how we can further improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=hhttps://github.com/kubefleet-dev/website/issues/new>tell us how we can fix the experience for you</a>.</p></div><script>const yesButton=document.querySelector(".feedback--answer-yes"),noButton=document.querySelector(".feedback--answer-no"),yesResponse=document.querySelector(".feedback--response-yes"),noResponse=document.querySelector(".feedback--response-no"),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=e=>{if(typeof gtag!="function")return;gtag("event","page_helpful",{event_category:"Helpful",event_label:window.location.pathname,value:e})};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(100)}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script><br></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/kubefleet-dev/kubefleet aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2025&ndash;2025
<span class=td-footer__authors>KubeFleet Contributors | The Linux FoundationÂ® (TLF) has registered trademarks and uses trademarks. For a list of TLF trademarks, see <a href=https://www.linuxfoundation.org/trademark-usage/>Trademark Usage</a> | <a href=https://creativecommons.org/licenses/by/4.0>CC BY 4.0</a> |</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span><span class=ms-2><a href=https://www.linuxfoundation.org/legal/privacy-policy target=_blank rel=noopener>Privacy Policy</a></span></div></div></div></footer></div><script src=/js/main.min.032ba2ecbd3ce89b96bffcfec71c5da352125ee752e9873c3e0098f7c32a6497.js integrity="sha256-Ayui7L086JuWv/z+xxxdo1ISXudS6Yc8PgCY98MqZJc=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>