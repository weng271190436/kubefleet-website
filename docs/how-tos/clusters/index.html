<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon.png><title>Managing clusters | KubeFleet</title>
<meta name=description content="How to join or remove a cluster from a fleet, and how to view the status of and label a member cluster"><meta property="og:url" content="https://kubefleet.dev/docs/how-tos/clusters/"><meta property="og:site_name" content="KubeFleet"><meta property="og:title" content="Managing clusters"><meta property="og:description" content="How to join or remove a cluster from a fleet, and how to view the status of and label a member cluster"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta itemprop=name content="Managing clusters"><meta itemprop=description content="How to join or remove a cluster from a fleet, and how to view the status of and label a member cluster"><meta itemprop=wordCount content="1460"><meta name=twitter:card content="summary"><meta name=twitter:title content="Managing clusters"><meta name=twitter:description content="How to join or remove a cluster from a fleet, and how to view the status of and label a member cluster"><link rel=preload href=/scss/main.min.9dbd381173ff32a411282c4d4c12047d289d581adc6a714308894ed3662001cb.css as=style><link href=/scss/main.min.9dbd381173ff32a411282c4d4c12047d289d581adc6a714308894ed3662001cb.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-page><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg role="img" viewBox="119.76 200.76 1260.48 1098.48"><title>KubeFleet</title><defs><style>.cls-1{fill:#fff}</style></defs><path d="M629.63 844.46l-38.9-153.8 159.83-68.71 157.8 69.9-38.54 151.84-240.19.77z" class="cls-1"/><path d="M885.25 551.34V658.4l-132.84-57.93-137.55 60.04c-3.05 2.43-2.87-7.86-2.87-9.6v-99.56h273.26zm-29.07-79.23c.97.77-1.94 2.76-1.94 3.21v59.95c0 .65 2.45 1.64 1.94 3.21H643c-.52-1.57 1.94-2.56 1.94-3.21v-59.95c0-.65-2.45-1.64-1.94-3.21h213.18zm-155.04-55.67h98.84v44.96h-98.84zm461.95 323.44-26.99 103.81-199.43.71-27.45-103.41 127.01-56.75 126.86 55.64z" class="cls-1"/><path d="M1143.78 632.7v79.22l-107.54-45.11-111.45 47.23c-.95-.79 1.94-2.73 1.94-3.19v-74.94c0-.65-2.45-1.64-1.94-3.21h218.99zm-25.19-66.37v53.53H951.92V567.4l2.91-2.75c.79-.06 1.46 1.68 1.94 1.68h161.82zm-36.82-47.11v36.4h-93.02c3.3-10.04 2.69-22.86.47-33.28l2.44-3.12h90.12zm-488 220.56L563.8 844.83l-198.53-.37-27.36-103.47 126.64-56.36 129.22 55.15z" class="cls-1"/><path d="M574.38 632.7c.97.77-1.94 2.76-1.94 3.21v76.01l-107.52-45.13-107.6 47.27V632.7h217.05zm-25.19-68.52v55.67H382.52c-.52-1.57 1.94-2.56 1.94-3.21v-47.11c0-.54-2.29-1.71-1.12-3.24l5.88-2.22 159.97.1zm-127.91-44.96h91.09v36.4h-91.09z" class="cls-1"/><path d="M1053.6 225.51H447.4L144.3 750.5l303.1 524.99h606.2l303.1-524.99-303.1-524.99zm-31.06 996.17H478.47L206.44 750.5l272.03-471.18h544.07l272.03 471.18-272.03 471.18z" class="cls-1"/><path d="M265.07 901.28h973.01v53.81H265.07zm76.07 117.64h815v53.81h-815zm63.73 112.59h682.56v53.81H404.87z" class="cls-1"/></svg></span><span class=navbar-brand__name>KubeFleet</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class="nav-link active" href=/docs/><span>Docs</span></a></li><li class="nav-item dropdown d-none d-lg-block"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><ul class=dropdown-menu><li><a class=dropdown-item href=/zh-cn/>中文（简体）</a></li></ul></div></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.0da800b108c9dafb2c9df58e456b44f6.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.0da800b108c9dafb2c9df58e456b44f6.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><div class="td-sidebar-nav__section nav-item dropdown d-block d-lg-none"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><ul class=dropdown-menu><li><a class=dropdown-item href=/zh-cn/>中文（简体）</a></li></ul></div></div><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ title="Welcome to KubeFleet Documentation" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Docs</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsconcepts-li><a href=/docs/concepts/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsconcepts><span>Concepts</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptscomponents-li><a href=/docs/concepts/components/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptscomponents><span>Fleet components</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsmembercluster-li><a href=/docs/concepts/membercluster/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsmembercluster><span>MemberCluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptscrp-li><a href=/docs/concepts/crp/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptscrp><span>ClusterResourcePlacement</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsrp-li><a href=/docs/concepts/rp/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsrp><span>ResourcePlacement</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsscheduler-li><a href=/docs/concepts/scheduler/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsscheduler><span>Scheduler</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsscheduling-framework-li><a href=/docs/concepts/scheduling-framework/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsscheduling-framework><span>Scheduling Framework</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsproperties-li><a href=/docs/concepts/properties/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsproperties><span>Properties and Property Provides</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptssafe-rollout-li><a href=/docs/concepts/safe-rollout/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptssafe-rollout><span>Safe Rollout</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsoverride-li><a href=/docs/concepts/override/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsoverride><span>Override</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptsstaged-update-li><a href=/docs/concepts/staged-update/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptsstaged-update><span>Staged Update</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsconceptseviction-pdb-li><a href=/docs/concepts/eviction-pdb/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsconceptseviction-pdb><span>Eviction and Placement Disruption Budget</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsgetting-started-li><a href=/docs/getting-started/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsgetting-started><span>Getting Started</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgetting-startedkind-li><a href=/docs/getting-started/kind/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedkind><span>Getting started with Fleet using KinD clusters</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgetting-startedon-prem-li><a href=/docs/getting-started/on-prem/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedon-prem><span>Getting started with Fleet using on-premises clusters</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docshow-tos-li><a href=/docs/how-tos/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docshow-tos><span>How-To Guides</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docshow-tosclusters-li><a href=/docs/how-tos/clusters/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-docshow-tosclusters><span class=td-sidebar-nav-active-item>Managing clusters</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-toscrp-li><a href=/docs/how-tos/crp/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-toscrp><span>Using the ClusterResourcePlacement API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosrp-li><a href=/docs/how-tos/rp/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosrp><span>Using the ResourcePlacement API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosaffinities-li><a href=/docs/how-tos/affinities/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosaffinities><span>Using Affinity to Pick Clusters</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tostopology-spread-constraints-li><a href=/docs/how-tos/topology-spread-constraints/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tostopology-spread-constraints><span>Using Topology Spread Constraints to Spread Resources</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosproperty-based-scheduling-li><a href=/docs/how-tos/property-based-scheduling/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosproperty-based-scheduling><span>Using Property-Based Scheduling</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tostaints-tolerations-li><a href=/docs/how-tos/taints-tolerations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tostaints-tolerations><span>Using Taints and Tolerations</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-toscluster-resource-override-li><a href=/docs/how-tos/cluster-resource-override/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-toscluster-resource-override><span>Using the ClusterResourceOverride API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosresource-override-li><a href=/docs/how-tos/resource-override/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosresource-override><span>Using the ResourceOverride API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosenvelope-object-li><a href=/docs/how-tos/envelope-object/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosenvelope-object><span>Using Envelope Objects to Place Resources</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tostakeover-li><a href=/docs/how-tos/takeover/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tostakeover><span>Controlling How Fleet Handles Pre-Existing Resources</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosdrift-detection-li><a href=/docs/how-tos/drift-detection/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosdrift-detection><span>Enabling Drift Detection in Fleet</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosreportdiff-li><a href=/docs/how-tos/reportdiff/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosreportdiff><span>Using the ReportDiff Apply Mode</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosstaged-update-li><a href=/docs/how-tos/staged-update/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosstaged-update><span>How to Roll Out and Roll Back Changes in Stage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-toseviction-disruption-budget-li><a href=/docs/how-tos/eviction-disruption-budget/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-toseviction-disruption-budget><span>Evicting Resources and Setting up Disruption Budgets</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshow-tosai-job-scheduling-kueue-integration-li><a href=/docs/how-tos/ai-job-scheduling-kueue-integration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshow-tosai-job-scheduling-kueue-integration><span>Scheduling AI Jobs with Kueue and Fleet</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docstutorials-li><a href=/docs/tutorials/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docstutorials><span>Tutorials</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsclustermigrationdr-li><a href=/docs/tutorials/clustermigrationdr/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsclustermigrationdr><span>Resource Migration Across Clusters</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsmigrationwithoverridedr-li><a href=/docs/tutorials/migrationwithoverridedr/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsmigrationwithoverridedr><span>Resource Migration With Overrides</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstutorialsargocd-li><a href=/docs/tutorials/argocd/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstutorialsargocd><span>KubeFleet and ArgoCD Integration</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docstroubleshooting-li><a href=/docs/troubleshooting/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docstroubleshooting><span>Troubleshooting Guides</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacement-li><a href=/docs/troubleshooting/clusterresourceplacement/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacement><span>ClusterResourcePlacement TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacementscheduled-li><a href=/docs/troubleshooting/clusterresourceplacementscheduled/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacementscheduled><span>CRP Schedule Failure TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacementrolloutstarted-li><a href=/docs/troubleshooting/clusterresourceplacementrolloutstarted/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacementrolloutstarted><span>CRP Rollout Failure TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacementoverridden-li><a href=/docs/troubleshooting/clusterresourceplacementoverridden/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacementoverridden><span>CRP Override Failure TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacementworksynchronized-li><a href=/docs/troubleshooting/clusterresourceplacementworksynchronized/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacementworksynchronized><span>CRP Work-Synchronization Failure TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacementapplied-li><a href=/docs/troubleshooting/clusterresourceplacementapplied/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacementapplied><span>CRP Work-Application Failure TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacementavailable-li><a href=/docs/troubleshooting/clusterresourceplacementavailable/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacementavailable><span>CRP Availability Failure TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingdriftanddiffdetection-li><a href=/docs/troubleshooting/driftanddiffdetection/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingdriftanddiffdetection><span>CRP Drift Detection and Configuration Difference Check Unexpected Result TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacementdiffreported-li><a href=/docs/troubleshooting/clusterresourceplacementdiffreported/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacementdiffreported><span>CRP Diff Reporting Failure TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterstagedupdaterun-li><a href=/docs/troubleshooting/clusterstagedupdaterun/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterstagedupdaterun><span>ClusterStagedUpdateRun TSG</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingclusterresourceplacementeviction-li><a href=/docs/troubleshooting/clusterresourceplacementeviction/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingclusterresourceplacementeviction><span>ClusterResourcePlacementEviction TSG</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsfaq-li><a href=/docs/faq/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsfaq><span>Frequently Asked Questions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsapi-reference-li><a href=/docs/api-reference/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsapi-reference><span>API Reference</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsapi-referenceclusterkubernetes-fleetiov1-li><a href=/docs/api-reference/cluster.kubernetes-fleet.io/v1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-referenceclusterkubernetes-fleetiov1><span>API Reference</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsapi-referenceclusterkubernetes-fleetiov1beta1-li><a href=/docs/api-reference/cluster.kubernetes-fleet.io/v1beta1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-referenceclusterkubernetes-fleetiov1beta1><span>API Reference</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsapi-referenceplacementkubernetes-fleetiov1-li><a href=/docs/api-reference/placement.kubernetes-fleet.io/v1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-referenceplacementkubernetes-fleetiov1><span>API Reference</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsapi-referenceplacementkubernetes-fleetiov1beta1-li><a href=/docs/api-reference/placement.kubernetes-fleet.io/v1beta1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsapi-referenceplacementkubernetes-fleetiov1beta1><span>API Reference</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"><a href=https://github.com/kubefleet-dev/website/tree/main/content/en/docs/how-tos/clusters.md class="td-page-meta--view td-page-meta__view" target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a href=https://github.com/kubefleet-dev/website/edit/main/content/en/docs/how-tos/clusters.md class="td-page-meta--edit td-page-meta__edit" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
<a href="https://github.com/kubefleet-dev/website/new/main/content/en/docs/how-tos?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class="td-page-meta--child td-page-meta__child" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
<a href="https://github.com/kubefleet-dev/website/issues/new?title=Managing%20clusters" class="td-page-meta--issue td-page-meta__issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/kubefleet-dev/kubefleet/issues/new class="td-page-meta--project td-page-meta__project-issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
<a id=print href=/docs/how-tos/_print/><i class="fa-solid fa-print fa-fw"></i> Print entire section</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#joining-a-cluster-into-a-fleet>Joining a cluster into a fleet</a></li><li><a href=#setting-a-cluster-to-leave-a-fleet>Setting a cluster to leave a fleet</a></li><li><a href=#viewing-the-status-of-a-member-cluster>Viewing the status of a member cluster</a></li><li><a href=#adding-labels-to-a-member-cluster>Adding labels to a member cluster</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Docs</a></li><li class=breadcrumb-item><a href=/docs/how-tos/>How-To Guides</a></li><li class="breadcrumb-item active" aria-current=page>Managing clusters</li></ol></nav><div class=td-content><h1>Managing clusters</h1><div class=lead>How to join or remove a cluster from a fleet, and how to view the status of and label a member cluster</div><header class=article-meta></header><p>This how-to guide discusses how to manage clusters in a fleet, specifically:</p><ul><li>how to join a cluster into a fleet; and</li><li>how to set a cluster to leave a fleet; and</li><li>how to add labels to a member cluster</li></ul><h2 id=joining-a-cluster-into-a-fleet>Joining a cluster into a fleet</h2><p>A cluster can join in a fleet if:</p><ul><li>it runs a supported Kubernetes version; it is recommended that you use Kubernetes 1.24 or later
versions, and</li><li>it has network connectivity to the hub cluster of the fleet.</li></ul><p>For your convenience, Fleet provides a script that can automate the process of joining a cluster
into a fleet. To use the script, run the commands below:</p><blockquote><p>Note</p><p>To run this script, make sure that you have already installed the following tools in your
system:</p><ul><li><code>kubectl</code>, the Kubernetes CLI</li><li><code>helm</code>, a Kubernetes package manager</li><li><code>curl</code></li><li><code>jq</code></li><li><code>base64</code></li></ul></blockquote><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Replace the value of HUB_CLUSTER_CONTEXT with the name of the kubeconfig context you use for</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># accessing your hub cluster.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>HUB_CLUSTER_CONTEXT</span><span style=color:#ce5c00;font-weight:700>=</span>YOUR-HUB-CLUSTER-CONTEXT
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Replace the value of HUB_CLUSTER_ADDRESS with the address of your hub cluster API server.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>HUB_CLUSTER_ADDRESS</span><span style=color:#ce5c00;font-weight:700>=</span>YOUR-HUB-CLUSTER-ADDRESS
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Replace the value of MEMBER_CLUSTER with the name you would like to assign to the new member</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># cluster.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Note that Fleet will recognize your cluster with this name once it joins.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>MEMBER_CLUSTER</span><span style=color:#ce5c00;font-weight:700>=</span>YOUR-MEMBER-CLUSTER
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Replace the value of MEMBER_CLUSTER_CONTEXT with the name of the kubeconfig context you use</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># for accessing your member cluster.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>MEMBER_CLUSTER_CONTEXT</span><span style=color:#ce5c00;font-weight:700>=</span>YOUR-MEMBER-CLUSTER-CONTEXT
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Clone the Fleet GitHub repository.</span>
</span></span><span style=display:flex><span>git clone https://github.com/kubefleet-dev/kubefleet.git
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Run the script.</span>
</span></span><span style=display:flex><span>chmod +x kubefleet/hack/membership/joinMC.sh
</span></span><span style=display:flex><span>./kubefleet/hack/membership/joinMC.sh
</span></span></code></pre></div><p>It may take a few minutes for the script to finish running. Once it is completed, verify
that the cluster has joined successfully with the command below:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl config use-context <span style=color:#000>$HUB_CLUSTER_CONTEXT</span>
</span></span><span style=display:flex><span>kubectl get membercluster <span style=color:#000>$MEMBER_CLUSTER</span>
</span></span></code></pre></div><p>If you see that the cluster is still in an unknown state, it might be that the member cluster
is still connecting to the hub cluster. Should this state persist for a prolonged
period, refer to the <a href=/docs/troubleshooting/>Troubleshooting Guide</a> for
more information.</p><p>Alternatively, if you would like to find out the exact steps the script performs, or if you feel
like fine-tuning some of the steps, you may join a cluster manually to your fleet with the
instructions below:</p><details><summary>Joining a member cluster manually</summary><ol><li><p>Make sure that you have installed <code>kubectl</code>, <code>helm</code>, <code>curl</code>, <code>jq</code>, and <code>base64</code> in your
system.</p></li><li><p>Create a Kubernetes service account in your hub cluster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Replace the value of HUB_CLUSTER_CONTEXT with the name of the kubeconfig</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># context you use for accessing your hub cluster.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>HUB_CLUSTER_CONTEXT</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;YOUR-HUB-CLUSTER-CONTEXT&#34;</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Replace the value of MEMBER_CLUSTER with a name you would like to assign to the new</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># member cluster.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Note that the value of MEMBER_CLUSTER will be used as the name the member cluster registers</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># with the hub cluster.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>MEMBER_CLUSTER</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;YOUR-MEMBER-CLUSTER&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>SERVICE_ACCOUNT</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;</span><span style=color:#000>$MEMBER_CLUSTER</span><span style=color:#4e9a06>-hub-cluster-access&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl config use-context <span style=color:#000>$HUB_CLUSTER_CONTEXT</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># The service account can, in theory, be created in any namespace; for simplicity reasons,</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># here you will use the namespace reserved by Fleet installation, `fleet-system`.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Note that if you choose a different value, commands in some steps below need to be</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># modified accordingly.</span>
</span></span><span style=display:flex><span>kubectl create serviceaccount <span style=color:#000>$SERVICE_ACCOUNT</span> -n fleet-system
</span></span></code></pre></div></li><li><p>Create a Kubernetes secret of the service account token type, which the member cluster will
use to access the hub cluster.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>SERVICE_ACCOUNT_SECRET</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;</span><span style=color:#000>$MEMBER_CLUSTER</span><span style=color:#4e9a06>-hub-cluster-access-token&#34;</span>
</span></span><span style=display:flex><span>cat <span style=color:#4e9a06>&lt;&lt;EOF | kubectl apply -f -
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>apiVersion: v1
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>kind: Secret
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>metadata:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    name: $SERVICE_ACCOUNT_SECRET
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    namespace: fleet-system
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    annotations:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        kubernetes.io/service-account.name: $SERVICE_ACCOUNT
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>type: kubernetes.io/service-account-token
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>EOF</span>
</span></span></code></pre></div><p>After the secret is created successfully, extract the token from the secret:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>TOKEN</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>kubectl get secret <span style=color:#000>$SERVICE_ACCOUNT_SECRET</span> -n fleet-system -o <span style=color:#000>jsonpath</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;{.data.token}&#39;</span> <span style=color:#000;font-weight:700>|</span> base64 -d<span style=color:#204a87;font-weight:700>)</span>
</span></span></code></pre></div><blockquote><p>Note</p><p>Keep the token in a secure place; anyone with access to this token can access the hub cluster
in the same way as the Fleet member cluster does.</p></blockquote><p>You may have noticed that at this moment, no access control has been set on the service
account; Fleet will set things up when the member cluster joins. The service account will be
given the minimally viable set of permissions for the Fleet member cluster to connect to the
hub cluster; its access will be restricted to one namespace, specifically reserved for the
member cluster, as per security best practices.</p></li><li><p>Register the member cluster with the hub cluster; Fleet manages cluster membership using the
<code>MemberCluster</code> API:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cat <span style=color:#4e9a06>&lt;&lt;EOF | kubectl apply -f -
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>apiVersion: cluster.kubernetes-fleet.io/v1beta1
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>kind: MemberCluster
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>metadata:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    name: $MEMBER_CLUSTER
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>spec:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    identity:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        name: $SERVICE_ACCOUNT
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        kind: ServiceAccount
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        namespace: fleet-system
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        apiGroup: &#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    heartbeatPeriodSeconds: 60
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>EOF</span>
</span></span></code></pre></div></li><li><p>Set up the member agent, the Fleet component that works on the member cluster end, to enable
Fleet connection:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Clone the Fleet repository from GitHub.</span>
</span></span><span style=display:flex><span>git clone https://github.com/kubefleet-dev/kubefleet.git
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Install the member agent helm chart on the member cluster.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Replace the value of MEMBER_CLUSTER_CONTEXT with the name of the kubeconfig context you use</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># for member cluster access.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>MEMBER_CLUSTER_CONTEXT</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;YOUR-MEMBER-CLUSTER-CONTEXT&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Replace the value of HUB_CLUSTER_ADDRESS with the address of the hub cluster API server.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>HUB_CLUSTER_ADDRESS</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;YOUR-HUB-CLUSTER-ADDRESS&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># The variables below uses the Fleet images kept in the Microsoft Container</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Registry (MCR) and will retrieve the latest version from the Fleet GitHub</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># repository. This pulls from the Azure Fleet repository while the kubefleet</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># containers are being developed.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># You can also build the Fleet images of your own; see the repository README</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># for more information.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>REGISTRY</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;mcr.microsoft.com/aks/fleet&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>FLEET_VERSION</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>curl <span style=color:#4e9a06>&#34;https://api.github.com/repos/Azure/fleet/tags&#34;</span> <span style=color:#000;font-weight:700>|</span> jq -r <span style=color:#4e9a06>&#39;.[0].name&#39;</span><span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>MEMBER_AGENT_IMAGE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;member-agent&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>REFRESH_TOKEN_IMAGE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;refresh-token&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl config use-context <span style=color:#000>$MEMBER_CLUSTER_CONTEXT</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Create the secret with the token extracted previously for member agent to use.</span>
</span></span><span style=display:flex><span>kubectl create secret generic hub-kubeconfig-secret --from-literal<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>token</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>$TOKEN</span>
</span></span><span style=display:flex><span>helm install member-agent kubefleet/charts/member-agent/ <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --set config.hubURL<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>$HUB_CLUSTER_ADDRESS</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --set image.repository<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>$REGISTRY</span>/<span style=color:#000>$MEMBER_AGENT_IMAGE</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --set image.tag<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>$FLEET_VERSION</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --set refreshtoken.repository<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>$REGISTRY</span>/<span style=color:#000>$REFRESH_TOKEN_IMAGE</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --set refreshtoken.tag<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>$FLEET_VERSION</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --set image.pullPolicy<span style=color:#ce5c00;font-weight:700>=</span>Always <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --set refreshtoken.pullPolicy<span style=color:#ce5c00;font-weight:700>=</span>Always <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --set config.memberClusterName<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;</span><span style=color:#000>$MEMBER_CLUSTER</span><span style=color:#4e9a06>&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --set <span style=color:#000>logVerbosity</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>5</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --set <span style=color:#000>namespace</span><span style=color:#ce5c00;font-weight:700>=</span>fleet-system <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --set <span style=color:#000>enableV1Alpha1APIs</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>false</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --set <span style=color:#000>enableV1Beta1APIs</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>true</span>
</span></span></code></pre></div></li><li><p>Verify that the installation of the member agent is successful:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl get pods -n fleet-system
</span></span></code></pre></div><p>You should see that all the returned pods are up and running. Note that it may take a few
minutes for the member agent to get ready.</p></li><li><p>Verify that the member cluster has joined the fleet successfully:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl config use-context <span style=color:#000>$HUB_CLUSTER_CONTEXT</span>
</span></span><span style=display:flex><span>kubectl get membercluster <span style=color:#000>$MEMBER_CLUSTER</span>
</span></span></code></pre></div></li></ol></details><h2 id=setting-a-cluster-to-leave-a-fleet>Setting a cluster to leave a fleet</h2><p>Fleet uses the <code>MemberCluster</code> API to manage cluster memberships. To remove a member cluster
from a fleet, simply delete its corresponding <code>MemberCluster</code> object from your hub cluster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Replace the value of MEMBER-CLUSTER with the name of the member cluster you would like to</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># remove from a fleet.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>MEMBER_CLUSTER</span><span style=color:#ce5c00;font-weight:700>=</span>YOUR-MEMBER-CLUSTER
</span></span><span style=display:flex><span>kubectl delete membercluster <span style=color:#000>$MEMBER_CLUSTER</span>
</span></span></code></pre></div><p>It may take a while before the member cluster leaves the fleet successfully. Fleet will perform
some cleanup; all the resources placed onto the cluster will be removed.</p><p>After the member cluster leaves, you can remove the member agent installation from it using Helm:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Replace the value of MEMBER_CLUSTER_CONTEXT with the name of the kubeconfig context you use</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># for member cluster access.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>MEMBER_CLUSTER_CONTEXT</span><span style=color:#ce5c00;font-weight:700>=</span>YOUR-MEMBER-CLUSTER-CONTEXT
</span></span><span style=display:flex><span>kubectl config use-context <span style=color:#000>$MEMBER_CLUSTER_CONTEXT</span>
</span></span><span style=display:flex><span>helm uninstall member-agent
</span></span></code></pre></div><p>It may take a few moments before the uninstallation completes.</p><h2 id=viewing-the-status-of-a-member-cluster>Viewing the status of a member cluster</h2><p>Similarly, you can use the <code>MemberCluster</code> API in the hub cluster to view the status of a
member cluster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Replace the value of MEMBER-CLUSTER with the name of the member cluster of which you would like</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># to view the status.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>MEMBER_CLUSTER</span><span style=color:#ce5c00;font-weight:700>=</span>YOUR-MEMBER-CLUSTER
</span></span><span style=display:flex><span>kubectl get membercluster <span style=color:#000>$MEMBER_CLUSTER</span> -o <span style=color:#000>jsonpath</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;{.status}&#34;</span>
</span></span></code></pre></div><p>The status consists of:</p><ul><li><p>an array of conditions, including:</p><ul><li>the <code>ReadyToJoin</code> condition, which signals whether the hub cluster is ready to accept
the member cluster; and</li><li>the <code>Joined</code> condition, which signals whether the cluster has joined the fleet; and</li><li>the <code>Healthy</code> condition, which signals whether the cluster is in a healthy state.</li></ul><p>Typically, a member cluster should have all three conditions set to true. Refer to the
<a href=/docs/troubleshooting/>Troubleshooting Guide</a> for help if a cluster fails to join
into a fleet.</p></li><li><p>the resource usage of the cluster; at this moment Fleet reports the capacity and
the allocatable amount of each resource in the cluster, summed up from all nodes in the cluster.</p></li><li><p>an array of agent status, which reports the status of specific Fleet agents installed in
the cluster; each entry features:</p><ul><li>an array of conditions, in which <code>Joined</code> signals whether the specific agent has been
successfully installed in the cluster, and <code>Healthy</code> signals whether the agent is in a
healthy state; and</li><li>the timestamp of the last received heartbeat from the agent.</li></ul></li></ul><h2 id=adding-labels-to-a-member-cluster>Adding labels to a member cluster</h2><p>You can add labels to a <code>MemberCluster</code> object in the same as with any other Kubernetes object.
These labels can then be used for targeting specific clusters in resource placement. To add a label,
run the command below:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Replace the values of MEMBER_CLUSTER, LABEL_KEY, and LABEL_VALUE with those of your own.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>MEMBER_CLUSTER</span><span style=color:#ce5c00;font-weight:700>=</span>YOUR-MEMBER-CLUSTER
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>LABEL_KEY</span><span style=color:#ce5c00;font-weight:700>=</span>YOUR-LABEL-KEY
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>LABEL_VALUE</span><span style=color:#ce5c00;font-weight:700>=</span>YOUR-LABEL-VALUE
</span></span><span style=display:flex><span>kubectl label membercluster <span style=color:#000>$MEMBER_CLUSTER</span> <span style=color:#000>$LABEL_KEY</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>$LABEL_VALUE</span>
</span></span></code></pre></div><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/kubefleet-dev/website/issues/new>tell us how we can further improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=hhttps://github.com/kubefleet-dev/website/issues/new>tell us how we can fix the experience for you</a>.</p></div><script>const yesButton=document.querySelector(".feedback--answer-yes"),noButton=document.querySelector(".feedback--answer-no"),yesResponse=document.querySelector(".feedback--response-yes"),noResponse=document.querySelector(".feedback--response-no"),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=e=>{if(typeof gtag!="function")return;gtag("event","page_helpful",{event_category:"Helpful",event_label:window.location.pathname,value:e})};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(100)}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script><br></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/kubefleet-dev/kubefleet aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2025&ndash;2025
<span class=td-footer__authors>KubeFleet Contributors | The Linux Foundation® (TLF) has registered trademarks and uses trademarks. For a list of TLF trademarks, see <a href=https://www.linuxfoundation.org/trademark-usage/>Trademark Usage</a> | <a href=https://creativecommons.org/licenses/by/4.0>CC BY 4.0</a> |</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span><span class=ms-2><a href=https://www.linuxfoundation.org/legal/privacy-policy target=_blank rel=noopener>Privacy Policy</a></span></div></div></div></footer></div><script src=/js/main.min.032ba2ecbd3ce89b96bffcfec71c5da352125ee752e9873c3e0098f7c32a6497.js integrity="sha256-Ayui7L086JuWv/z+xxxdo1ISXudS6Yc8PgCY98MqZJc=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>